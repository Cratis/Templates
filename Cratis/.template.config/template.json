{
    "$schema": "http://json.schemastore.org/template",
    "author": "Cratis",
    "classifications": [
        "Web",
        "ASP.NET",
        "Cratis",
        "Arc",
        "Chronicle"
    ],
    "identity": "Cratis.Templates.Web",
    "name": "Cratis Web Application",
    "shortName": "cratis",
    "description": "A template for creating a Cratis web application with optional React frontend",
    "tags": {
        "language": "C#",
        "type": "project"
    },
    "sourceName": "CratisApp",
    "preferNameDirectory": true,
    "primaryOutputs": [
        {
            "path": "CratisApp.csproj"
        }
    ],
    "symbols": {
        "EnableFrontend": {
            "type": "parameter",
            "datatype": "bool",
            "isRequired": true,
            "defaultValue": "true",
            "description": "Enable React/TypeScript/Vite frontend",
            "prompt": "Add React frontend?"
        },
        "Framework": {
            "type": "parameter",
            "datatype": "choice",
            "choices": [
                {
                    "choice": "net8.0",
                    "description": ".NET 8"
                },
                {
                    "choice": "net9.0",
                    "description": ".NET 9"
                },
                {
                    "choice": "net10.0",
                    "description": ".NET 10"
                }
            ],
            "defaultValue": "net10.0",
            "description": "Target framework",
            "prompt": "Select target framework"
        }
    },
    "sources": [
        {
            "modifiers": [
                {
                    "condition": "(!EnableFrontend)",
                    "exclude": [
                        "**/*.html",
                        "**/*.ts",
                        "**/*.tsx",
                        "**/*.css",
                        "package.json",
                        "tsconfig.json"
                    ]
                }
            ]
        }
    ],
    "postActions": [
        {
            "description": "Add Cratis package.",
            "manualInstructions": [
                {
                    "text": "Run 'dotnet add package Cratis'"
                }
            ],
            "actionId": "3A7C4B45-1F5D-4A30-959A-51B88E82B5D2",
            "args": {
                "executable": "dotnet",
                "args": "add package Cratis"
            },
            "continueOnError": true
        },
        {
            "condition": "(EnableFrontend)",
            "description": "Add Cratis ProxyGenerator package.",
            "manualInstructions": [
                {
                    "text": "Run 'dotnet add package Cratis.Arc.ProxyGenerator.Build'"
                }
            ],
            "actionId": "3A7C4B45-1F5D-4A30-959A-51B88E82B5D2",
            "args": {
                "executable": "dotnet",
                "args": "add package Cratis.Arc.ProxyGenerator.Build"
            },
            "continueOnError": true
        },
        {
            "description": "Restore NuGet packages required by this project.",
            "manualInstructions": [
                {
                    "text": "Run 'dotnet restore'"
                }
            ],
            "actionId": "210D431B-A78B-4D2F-B762-4ED3E3EA9025",
            "continueOnError": true
        },
        {
            "condition": "(EnableFrontend)",
            "description": "Add latest Cratis packages.",
            "manualInstructions": [
                {
                    "text": "Run 'yarn add @cratis/arc @cratis/arc.react'"
                }
            ],
            "actionId": "3A7C4B45-1F5D-4A30-959A-51B88E82B5D2",
            "args": {
                "executable": "yarn",
                "args": "add @cratis/arc @cratis/arc.react"
            },
            "continueOnError": true
        },
        {
            "condition": "(EnableFrontend)",
            "description": "Install frontend dependencies with yarn.",
            "manualInstructions": [
                {
                    "text": "Run 'yarn install'"
                }
            ],
            "actionId": "3A7C4B45-1F5D-4A30-959A-51B88E82B5D2",
            "args": {
                "executable": "yarn",
                "args": "install"
            },
            "continueOnError": true
        }
    ]
}